**学习的是基于TCP/IP体系结构的Web1.0计算机网络**

# 互联网概述

## 名词区分

计算机**网络**由若干结点(node)和连接结点的链路(link)以及计算机组成。{结点，计算机，链路}
**互连网（internet）**：网络的网络，通过路由器将网络连起来。{网络，路由器，链路}
**互联网/因特网（Internet）**：专有名词，特指全球最大的互连网，前身是ARPANET(1969年)。采用TCP/IP协议簇（1983年成为标准）作为通信规则
**主机(host)**：连接在因特网上的计算机

internet和Internet都是网络的网络
网络把许多计算机连接在一起，也称为物理网络
互联网则把许多网络连接在一起，是由物理网络集合构成的逻辑网络。

![替代：pic/internet和Internet](https://image.itbaima.net/images/253/image-20230610236063590.png)

## 互联网的组成

### 核心部分

**核心部分**：由大量异构网络和连接网络的路由器组成，作用是按存储转发方式进行**分组交换**，为边缘部分提供通信服务。

**三种交换方式**

![替代：pic/三种交换方式对比](https://image.itbaima.net/images/253/image-2023061023513460.png)

**电路交换**
电话使用的就是电路交换
* 建立连接（分配通信资源，建立一条专用的物理通路）
* 通话（通信双方一直占用通信资源，不会被其他用户只能用）
* 释放连接（归还通信资源）

**分组交换**
要发送的整块数据称为一个报文。将报文分为多个数据段，每个数据段加上一个首部控制信息构成一个分组（包）。采用存储转发技术，路由器收到分组后，先暂时存储，检查首部无误后，查找转发表，然后按照首部中的目的地址，找到合适的接口转发给下一个路由器，这样一步步交付给最终的目的主机。

**报文交换**
整个报文先传送到相邻结点，全部存储下来后查找转发表，转发到下一个结点。

**为啥用分组交换**
互联网上的数据具有**突发性**，采用电路交换的线路利用率会很低。而且分组交换比将整个报文进行交换的**时延要小**，且避免太长的报文长时间占据链路，**利于差错检测**，同时具有更好的**灵活性**。

### 边缘部分

**边缘部分**：由连接到互联网的主机组成，作用是进行信息处理。利用核心部分提供的服务进行通信，通信方式有客户-服务器方式(C/S)、对等方式(P2P)。

## 计网分类

**按交换方式**：三种交换方式

**按使用者**：公用网，专用网

**按传输介质**：无线网络，有线网络

**按覆盖范围**
* **广域网WAN**：几十到几千km，是互联网的核心部分，一般用高速链路将广域网连接起来。
* **城域网MAN**：5到50km，大多采用的是以太网技术。
* **局域网LAN**：1km左右，一般通过10Mb/s以上的高速链路相连。校园网、企业网为一般是多个局域网相连。
* **个人区域网PAN**：10m 左右。

**按拓扑结构**：总线型，星型，环型，网状型...

## 计网性能指标

**前置：速率单位和数据量单位量纲统一**

数据量单位的K、M、G、T的数值分别为2^10^、2^20^、2^30^、2^40^
速率单位中的K、M、G、T的数值分别为10^3^、10^6^、10^9^、10^12^

*注意b和B*

|数据量的单位|换算关系|
|--|--|
|比特(b)|基本单位|
|字节(B)|1B=8bit|
|千字节(KB)|KB=2^10^B|
|兆字节(MB)|2^20^B|
|吉字节(GB)|2^30^B|
|太字节(TB)|2^40^B|

|速率的单位|换算关系|
|--|--|
|比特/秒(b/s)|基本单位|
|千比特/秒(kb/s)|kb/s=10^3^b/s|
|兆比特/秒(Mb/s)|Mb/s=10^6^b/s|
|吉比特/秒(Gb/s)|Gb/s=10^9^b/s|
|太比特/秒(Tb/s)|Tb/s=10^12^b/s|

*例子*
![替代：pic/量纲转换](https://image.itbaima.net/images/253/image-20230611005874481.png)
***

**速率/数据率/比特率**
速率是数据的传送速率，单位是 bit/s，有时也写为 bps。
1G 速率实际上是 1Gbit/s 而不是 1Gbyte/s。提到网络速率时，一般指的是额定速率或标称速率。

***

**带宽**
* **模拟信号系统**：某个信号具有的频带宽度（频率范围），是一个赫兹范围。信道的带宽表示某信道允许通过的信号频带范围。
* **计算机网络**：表示单位时间内网络中的某信道所能通过的**最高数据率**，单位是 bit/s。

>速率匹配问题
数据传输速率 = min[主机接口速率，线路带宽，交换机/路由器的接口速率]

>光纤作为传输介质，速度快的原因并非光在光纤中传播的速度快(实际上不如电磁波在铜线的传播速率)，而是因为光纤的带宽很大。

***

**吞吐量**
吞吐量表示**单位时间内通过某个网络/接口的实际数据量**。
吞吐量**受网络的带宽或额定速率的限制**。

***

**时延**
时延是数据从网络的一端传送到另一端所需的时间。
总时延 = 发送时延+传播时延+排队实验+处理时延
* **发送(传输)时延**：主机或路由器发送数据帧所需的时间，即从发送数据帧的第一个比特到最后一个比特发送完毕的时间。发送时延 = 数据帧长度/发送速率
* **传播时延**：电磁波在信道中传播花费的时间。传播时延=信道长度 / 电磁波在信道上的传输速率
* **处理时延**：主机或路由器在收到分组时要花费时间处理数据，如分析分组的首部，从分组中提取数据部分，差错检验等等。不能精确计算出来。
* **排队时延**：分组在路由器中排队等待转发的时间，受网络当前通信量及路由器性能影响，不能精确计算。

>**做题**：除了分组刚开始发送时有发送时延，实际上，分组存储到路由器中，再转发时也会产生发送时延。如果中间有n个路由器，则额外产生n个单分组的发送时延
总发送时延 = 所有分组发送时延 + 1个分组发送时延 * n

***

**时延带宽积**
时延带宽积 = 传播时延 * 带宽。
又称**以比特为单位的链路长度**

***

**往返时间**
A 向 B 发数据后需要收到 B 发回的确认信息才会继续发送数据，A 发完数据后等待确认信息的时间就是往返时间（RTT）。
有效数据率 = 数据长度 / ( 发送时间 + RTT )。
在互联网中，往返时间还包括各中间结点的处理时延、排队时延和转发数据时的发送时延等。
使用卫星通信时，往返时间会比较长，是很重要的指标。

***

**利用率**
利用率有信道利用率和网络利用率两种：
* **信道利用率**：信道有百分之多少的时间是被利用的，即有数据通过。
* **网络利用率**：全网络的信道利用率的加权平均值。

**信道利用率并非越大越好**，因为根据排队论，当利用率增大时，信道引起的时延也会迅速增加。


# TCP/IP体系结构

|五层协议的体系结构|
|--|
|应用层|
|传输层|
|网络层|
|数据链路层|
|物理层|

**学习每一层，都从以下几点出发：**
* 该层的作用范围？
* 该层的任务是什么？
* 如何完成任务？（软件/协议，硬件，算法）
* 层间关系？（向上层提供什么服务？）

![替代：pic/层间关系.png](https://image.itbaima.net/images/253/image-20230610226504960.png)

***
**物理层**
* **作用范围**：终端主机，通信线路
* **任务**：更快，更好地传输数据比特流。尽可能屏蔽计网中硬件设备，传输媒体及通信手段的差异，使上层数据链路层感受不到这些差异
* **如何完成任务**
  * **硬件**：传输媒体（有导向，无导向）
  * **相关技术与标准**
     * 数据通信基本原理
     * 信道复用技术
     * 数字传输系统
* **层间关系**：提供给上层比特流传输服务，屏蔽下面的差异（传输媒体，同步异步）

***

**数据链路层**
* **作用范围**：同一局域网
* **任务**：封装成帧，透明传输，差错检测
* **如何完成任务**
  * 点对点信道——**PPP协议**
  * 广播信道：共享式以太网（半双工下采用**CSMA/CD协议**），交换式以太网
  * **硬件**：网络适配器（网卡），网桥，以太网交换机（也称交换式集线器/第二层交换机，实质上是一个多端口网桥）
* **层间关系**：提供给上层**无差错的传输**服务，屏蔽下层的差异（信源编码，信道复用技术，PCM系统体制）
  
***

**网络层**
* **作用范围**：多个网络
* **任务**：异构网络互联，即跨局域网连接和资源共享，属于通信子网
* **如何完成任务**
  * **软件(协议)**：IP协议，ICMP协议，IGMP协议，ARP协议，路由协议（BGP，RIP，OSPF）
  * **硬件**：路由器（结构，功能）
* **层间关系**：提供给上层尽最大可能交付的传输服务，屏蔽下层的差异（不同局域网的协议）

***

**传输层**
* **作用范围**：不同主机的应用进程之间
* **任务**：实现端到端的通信（两个主机进行通信实际上就是两个主机中的应用进程互相通信；应用进程之间的通信又称为端到端的通信）
* **如何完成任务**
  * UDP协议
  * TCP协议
* **层间关系**：提供给上层及时的服务（UDP）或可靠的服务（TCP），屏蔽下层的差异（各种不同路由协议）

***

**应用层**
* **作用范围**：终端主机
* **任务**：规定应用进程在通信时遵循的协议
* **如何完成任务**：一系列协议
  * DHCP
  * DNS
  * FTP
  * TELNET
  * WWW
  * SMTP，POP3，IMAP
  * SNMP
  * P2P应用
* **层间关系**：该层直接面对终端用户，提供应用

